<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPTVå·¥å…·ç®±</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: sans-serif; }
        body { background: #f5f5f5; min-height: 100vh; padding-bottom: 60px; }
        .header { padding: 15px 20px; background: #fff; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
        .header h1 { font-size: 18px; font-weight: bold; }
        .safe-tag { color: #f5222d; font-size: 14px; }
        .welcome { padding: 20px; background: #fff; margin: 10px; border-radius: 8px; }
        .welcome h2 { font-size: 24px; margin-bottom: 5px; }
        .welcome p { color: #666; font-size: 14px; }
        .tools { padding: 10px; display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .tool-btn { background: #fff; border: none; border-radius: 8px; padding: 20px 0; text-align: center; font-size: 16px; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .tool-btn .icon { font-size: 24px; margin-bottom: 8px; display: block; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; }
        .modal-content { background: #fff; padding: 20px; border-radius: 8px; width: 90%; max-width: 350px; }
        .modal-content h3 { margin-bottom: 15px; font-size: 18px; }
        .modal-content input { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #eee; border-radius: 4px; font-size: 14px; }
        .modal-btns { display: flex; gap: 10px; }
        .modal-btns button { flex: 1; padding: 10px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
        .btn-check { background: #1890ff; color: #fff; }
        .btn-close { background: #f5f5f5; color: #666; }
        .footer-nav { position: fixed; bottom: 0; left: 0; width: 100%; background: #fff; display: flex; justify-content: space-around; padding: 10px 0; border-top: 1px solid #eee; }
        .nav-item { font-size: 12px; color: #666; }
        .nav-item.active { color: #1890ff; }
        .result-tip { margin-top: 10px; padding: 10px; border-radius: 4px; font-size: 14px; display: none; }
        .success { background: #f0fff4; color: #52c41a; display: block; }
        .error { background: #fff2f0; color: #f5222d; display: block; }
    </style>
</head>
<body>
    <header class="header">
        <h1>IPTVå·¥å…·ç®±</h1>
        <div class="safe-tag">ä»…æµ‹è¯•ä½¿ç”¨</div>
    </header>

    <section class="welcome">
        <h2>æ¬¢è¿ä½¿ç”¨</h2>
        <p>IPTVæºæ£€æµ‹ä¸ç®¡ç†å·¥å…·ï¼ˆé€‚é…æ‰‹æœºï¼‰</p>
    </section>

    <section class="tools">
        <button class="tool-btn" onclick="alert('é…’åº—æºæ‰«æï¼šè‡ªåŠ¨æ£€æµ‹é…’åº—å†…ç½‘IPTVæº')">
            <span class="icon">ğŸ¨</span>
            <span>é…’åº—æºæ‰«æ</span>
        </button>
        <button class="tool-btn" onclick="alert('ç»„æ’­æºæ‰«æï¼šæ‰«æå½“å‰ç½‘ç»œç»„æ’­IPTVæµ')">
            <span class="icon">ğŸ“Š</span>
            <span>ç»„æ’­æºæ‰«æ</span>
        </button>
        <button class="tool-btn" onclick="alert('ç›´æ’­æœç´¢ï¼šè¾“å…¥å…³é”®è¯æŸ¥æ‰¾ç›´æ’­æº')">
            <span class="icon">ğŸ”</span>
            <span>ç›´æ’­æœç´¢</span>
        </button>
        <button class="tool-btn" onclick="document.getElementById('templateModal').style.display='flex'">
            <span class="icon">ğŸ“„</span>
            <span>æ¨¡æ¿æ£€æµ‹</span>
        </button>
        <button class="tool-btn" onclick="alert('ä»£ç†æ£€æµ‹ï¼šæ£€æµ‹ä»£ç†æœåŠ¡å™¨å¯ç”¨æ€§')">
            <span class="icon">ğŸŒ</span>
            <span>ä»£ç†æ£€æµ‹</span>
        </button>
        <button class="tool-btn" onclick="alert('æ ¼å¼è½¬æ¢ï¼šå°†IPTVæºè½¬ä¸ºM3Uæ ¼å¼')">
            <span class="icon">âœï¸</span>
            <span>æ ¼å¼è½¬æ¢</span>
        </button>
    </section>

    <div class="modal" id="templateModal">
        <div class="modal-content">
            <h3>æ¨¡æ¿æ£€æµ‹</h3>
            <input type="text" id="sourceUrl" placeholder="è¾“å…¥IPTVæºåœ°å€" value="http://itv.809899.xyz:22129/">
            <div id="checkResult" class="result-tip"></div>
            <div class="modal-btns">
                <button class="btn-check" onclick="checkSource()">æ£€æµ‹</button>
                <button class="btn-close" onclick="document.getElementById('templateModal').style.display='none'">å…³é—­</button>
            </div>
        </div>
    </div>

    <nav class="footer-nav">
        <div class="nav-item active">é¦–é¡µ ğŸ </div>
        <div class="nav-item">æ‰«æ âš¡</div>
        <div class="nav-item">æœç´¢ ğŸ”</div>
        <div class="nav-item">æ£€æµ‹ âœ…</div>
        <div class="nav-item">ä»£ç† ğŸŒ</div>
        <div class="nav-item">å·¥å…· ğŸ› ï¸</div>
    </nav>

    <script>
        async function checkSource() {
            const url = document.getElementById('sourceUrl').value.trim();
            const resultDom = document.getElementById('checkResult');
            if (!url) {
                resultDom.className = 'result-tip error';
                resultDom.textContent = "è¯·è¾“å…¥æœ‰æ•ˆIPTVæºåœ°å€";
                return;
            }

            try {
                // ç®€åŒ–æ£€æµ‹é€»è¾‘ï¼Œé¿å…è·¨åŸŸä»£ç†ä¾èµ–
                const controller = new AbortController();
                setTimeout(() => controller.abort(), 6000); // 6ç§’è¶…æ—¶
                const response = await fetch(url, { method: 'HEAD', signal: controller.signal });
                
                if (response.status >= 200 && response.status < 400) {
                    resultDom.className = 'result-tip success';
                    resultDom.textContent = `âœ… æºåœ°å€å¯ç”¨ï¼å¯å¯¼å…¥æ’­æ”¾å™¨ä½¿ç”¨`;
                } else {
                    resultDom.className = 'result-tip error';
                    resultDom.textContent = `âŒ æºåœ°å€å“åº”å¼‚å¸¸ï¼ˆçŠ¶æ€ç ï¼š${response.status}ï¼‰`;
                }
            } catch (error) {
                if (error.name === 'AbortError') {
                    resultDom.className = 'result-tip error';
                    resultDom.textContent = `âŒ è¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–æºåœ°å€`;
                } else {
                    resultDom.className = 'result-tip error';
                    resultDom.textContent = `âŒ æ— æ³•è®¿é—®ï¼š${error.message.split(':')[0]}`;
                }
            }
        }
    </script>
</body>
</html>
