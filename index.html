<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>国内IPTV直播源生成器（完整版）</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", Arial, sans-serif;
        }
        body {
            background: #f5f5f5;
            padding: 20px;
            max-width: 100%;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }
        h1 {
            font-size: 20px;
            color: #333;
            text-align: center;
            margin-bottom: 20px;
            font-weight: 600;
        }
        .filter-group {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        .filter-btn {
            padding: 6px 12px;
            border: 1px solid #1677ff;
            border-radius: 4px;
            background: #fff;
            color: #1677ff;
            cursor: pointer;
            font-size: 12px;
        }
        .filter-btn.active {
            background: #1677ff;
            color: #fff;
        }
        .btn-group {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: #1677ff;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        button:hover {
            opacity: 0.9;
        }
        button.gray {
            background: #666;
        }
        textarea {
            width: 100%;
            height: 300px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 12px;
            line-height: 1.5;
            resize: vertical;
            margin-bottom: 15px;
            background: #fafafa;
        }
        .channel-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .channel-item {
            padding: 10px 15px;
            border-bottom: 1px solid #f5f5f5;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .channel-item:last-child {
            border-bottom: none;
        }
        .channel-item:hover {
            background: #e8f4ff;
        }
        .channel-name {
            font-size: 14px;
            color: #333;
        }
        .channel-id {
            font-size: 12px;
            color: #666;
            font-family: monospace;
        }
        .tip {
            font-size: 12px;
            color: #999;
            text-align: center;
            margin-top: 10px;
            line-height: 1.6;
        }
        .warning {
            background: #fff2f2;
            color: #ff4d4f;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 12px;
            margin-bottom: 20px;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>国内IPTV直播源生成器（完整版）</h1>

        <div class="warning">
            ⚠️ 重要提示：使用国内公开源，无需代理直连！生成后直接导入播放器即可。
        </div>

        <div class="filter-group">
            <button class="filter-btn active" onclick="filterChannel('all')">全部频道</button>
            <button class="filter-btn" onclick="filterChannel('cctv')">央视</button>
            <button class="filter-btn" onclick="filterChannel('satellite')">卫视</button>
            <button class="filter-btn" onclick="filterChannel('local')">地方台</button>
        </div>

        <div class="btn-group">
            <button onclick="generateFullM3U()">生成完整 M3U 播放列表</button>
            <button onclick="copyResult()" class="gray">复制结果</button>
            <button onclick="downloadResult()" class="gray">下载文件</button>
        </div>

        <div class="channel-list" id="channelList">
            <!-- 频道列表由JS生成 -->
        </div>

        <textarea id="resultArea" placeholder="生成的播放源内容会显示在这里..."></textarea>

        <div class="tip">
            1. 支持频道分类筛选，点击频道可生成单个频道链接<br>
            2. 推荐播放器：VLC、Kodi、Perfect Player<br>
            3. 搭配EPG源 https://epg.51zmt.top:8000/e.xml.gz 可显示节目单
        </div>
    </div>

    <script>
        // 核心配置：频道+公开源地址+分类+LOGO匹配
        const CHANNELS = {
            // 央视系列 - 分类标识 cctv
            "cctv1": ["cctv", "https://live.fanmingming.com/tv/m3u/itv.m3u", "CCTV-1 综合", "https://picsum.photos/id/1/32/32"],
            "cctv2": ["cctv", "https://live.fanmingming.com/tv/m3u/itv.m3u", "CCTV-2 财经", "https://picsum.photos/id/2/32/32"],
            "cctv3": ["cctv", "https://live.fanmingming.com/tv/m3u/itv.m3u", "CCTV-3 综艺", "https://picsum.photos/id/3/32/32"],
            "cctv5": ["cctv", "https://live.fanmingming.com/tv/m3u/itv.m3u", "CCTV-5 体育", "https://picsum.photos/id/4/32/32"],
            "cctv5p": ["cctv", "https://live.fanmingming.com/tv/m3u/itv.m3u", "CCTV-5+ 体育赛事", "https://picsum.photos/id/5/32/32"],
            "cctv6": ["cctv", "https://live.fanmingming.com/tv/m3u/itv.m3u", "CCTV-6 电影", "https://picsum.photos/id/6/32/32"],
            "cctv8": ["cctv", "https://live.fanmingming.com/tv/m3u/itv.m3u", "CCTV-8 电视剧", "https://picsum.photos/id/7/32/32"],
            "cctv13": ["cctv", "https://live.fanmingming.com/tv/m3u/itv.m3u", "CCTV-13 新闻", "https://picsum.photos/id/8/32/32"],
            "cctv14": ["cctv", "https://live.fanmingming.com/tv/m3u/itv.m3u", "CCTV-14 少儿", "https://picsum.photos/id/9/32/32"],
            // 卫视系列 - 分类标识 satellite
            "hunan": ["satellite", "https://live.fanmingming.com/tv/m3u/itv.m3u", "湖南卫视", "https://picsum.photos/id/10/32/32"],
            "zhejiang": ["satellite", "https://live.fanmingming.com/tv/m3u/itv.m3u", "浙江卫视", "https://picsum.photos/id/11/32/32"],
            "jiangsu": ["satellite", "https://live.fanmingming.com/tv/m3u/itv.m3u", "江苏卫视", "https://picsum.photos/id/12/32/32"],
            "dragon": ["satellite", "https://live.fanmingming.com/tv/m3u/itv.m3u", "东方卫视", "https://picsum.photos/id/13/32/32"],
            "guangdong": ["satellite", "https://live.fanmingming.com/tv/m3u/itv.m3u", "广东卫视", "https://picsum.photos/id/14/32/32"],
            "beijing": ["satellite", "https://live.fanmingming.com/tv/m3u/itv.m3u", "北京卫视", "https://picsum.photos/id/15/32/32"],
            // 地方台系列 - 分类标识 local
            "shanghai": ["local", "https://live.fanmingming.com/tv/m3u/itv.m3u", "上海新闻综合", "https://picsum.photos/id/16/32/32"],
            "guangzhou": ["local", "https://live.fanmingming.com/tv/m3u/itv.m3u", "广州综合", "https://picsum.photos/id/17/32/32"],
            "suzhou": ["local", "https://live.fanmingming.com/tv/m3u/itv.m3u", "苏州新闻综合", "https://picsum.photos/id/18/32/32"],
            "chengdu": ["local", "https://live.fanmingming.com/tv/m3u/itv.m3u", "成都新闻综合", "https://picsum.photos/id/19/32/32"]
        };

        // 页面加载渲染全部频道
        window.onload = function() {
            renderChannelList('all');
        };

        // 渲染频道列表（支持分类筛选）
        function renderChannelList(type) {
            const listEl = document.getElementById('channelList');
            let html = '';
            for (const [id, [category, url, name, logo]] of Object.entries(CHANNELS)) {
                if (type !== 'all' && category !== type) continue;
                html += `
                <div class="channel-item" onclick="generateSingleChannel('${id}')">
                    <span class="channel-name">${name}</span>
                    <span class="channel-id">${id}</span>
                </div>
                `;
            }
            listEl.innerHTML = html;
        }

        // 分类筛选按钮样式切换
        function filterChannel(type) {
            const btns = document.querySelectorAll('.filter-btn');
            btns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            renderChannelList(type);
        }

        // 生成完整M3U播放列表（带LOGO和分类）
        function generateFullM3U() {
            let m3u = "#EXTM3U\n";
            for (const [id, [category, url, name, logo]] of Object.entries(CHANNELS)) {
                m3u += `#EXTINF:-1 tvg-id="${id}" tvg-name="${name}" tvg-logo="${logo}" group-title="${category === 'cctv' ? '央视' : category === 'satellite' ? '卫视' : '地方台'}",${name}\n`;
                m3u += `${url}\n`;
            }
            document.getElementById('resultArea').value = m3u;
            alert(`已生成 ${Object.keys(CHANNELS).length} 个国内精选频道 M3U 列表`);
        }

        // 生成单个频道链接
        function generateSingleChannel(id) {
            const [category, url, name, logo] = CHANNELS[id];
            const singleM3u = `#EXTM3U\n#EXTINF:-1 tvg-id="${id}" tvg-name="${name}" tvg-logo="${logo}" group-title="${category === 'cctv' ? '央视' : category === 'satellite' ? '卫视' : '地方台'}",${name}\n${url}`;
            document.getElementById('resultArea').value = singleM3u;
            alert(`已生成【${name}】的播放链接`);
        }

        // 复制结果
        function copyResult() {
            const textarea = document.getElementById('resultArea');
            if (!textarea.value) {
                alert('暂无内容可复制！');
                return;
            }
            textarea.select();
            navigator.clipboard.writeText(textarea.value).then(() => {
                alert('复制成功！直接导入播放器即可');
            }).catch(() => {
                document.execCommand('copy');
                alert('复制成功！直接导入播放器即可');
            });
        }

        // 下载结果
        function downloadResult() {
            const textarea = document.getElementById('resultArea');
            if (!textarea.value) {
                alert('暂无内容可下载！');
                return;
            }
            const fileName = `国内IPTV直播源_${new Date().getTime()}.m3u`;
            const blob = new Blob([textarea.value], { type: 'application/octet-stream' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = fileName;
            a.click();
            URL.revokeObjectURL(url);
            alert(`已下载 ${fileName}`);
        }
    </script>
</body>
</html>
